# Вариант 25

## Задание №3

### Описание

Разработать инструмент командной строки для учебного конфигурационного языка, синтаксис которого описан ниже. Этот инструмент преобразует текст из входного формата в выходной формат (XML). В случае синтаксических ошибок программа должна выдавать соответствующие сообщения.

- **Входной текст**: файл на учебном конфигурационном языке, путь к которому передается как аргумент командной строки.
- **Выходной текст**: XML, выводимый в стандартный поток вывода.

### Синтаксис учебного конфигурационного языка

#### Комментарии

Однострочные комментарии начинаются с `!`: ! Это однострочный комментарий


#### Массивы

Массивы представляются конструкцией `(list ...)`: (list значение значение значение ...)


#### Словари

Словари представляются фигурными скобками: { имя = значение; имя = значение; имя = значение; ... }


#### Имена

Имена переменных и констант состоят из строчных латинских букв: [a-z]+


#### Значения

Значением могут быть:
- Числа (целые или с плавающей точкой).
- Строки.
- Массивы.
- Словари.

#### Строки

Строки обозначаются двойными квадратными скобками: [[Это строка]]


#### Объявление константы на этапе трансляции

Константы объявляются с использованием `->`: значение -> имя;


#### Вычисление константы на этапе трансляции

Константы вычисляются с использованием символов `|`: |имя|

Результатом вычисления константного выражения является его значение. Константы могут использоваться в выражениях с арифметическими операциями: force = |mass| * |acceleration|;


### Функциональные требования

1. Программа должна корректно обрабатывать все конструкции конфигурационного языка, включая вложенные массивы и словари.
2. В случае синтаксических ошибок должны выводиться соответствующие сообщения.

### Пример использования

#### Запуск программы

Для запуска программы используйте следующую команду:
```bash
python3 src/config_to_xml.py <путь_к_файлу>
```

### Пример входного файла

```
! Конфигурация физического движка
9.8 -> gravity;
80 -> mass;
|gravity| * |mass| -> force;

{
    material = [[steel]];
    weight = |force|;
    dimensions = (list 2.0 3.0 5.0);
}
```

### Пример выхода

```xml
<config>
    <item>{'material': 'steel', 'weight': 784.0, 'dimensions': [2.0, 3.0, 5.0]}</item>
</config>
```

### Примеры конфигураций

#### 1. Физика

```
! Конфигурация физического эксперимента
9.8 -> gravity;
50 -> mass;
|gravity| * |mass| -> force;

{
    object = [[ball]];
    force = |force|;
    dimensions = (list 0.2 0.2 0.2);
}
```

#### 2. База данных

```
! Конфигурация базы данных
[[localhost]] -> host;
5432 -> port;
{
    credentials = {
        username = [[admin]];
        password = [[secret]];
    };
    connection = {
        host = |host|;
        port = |port|;
    };
}
```

#### 3. Пользовательский интерфейс

```
! Конфигурация пользовательского интерфейса
[[dark]] -> theme;
[[en]] -> language;
{
    theme = |theme|;
    language = |language|;
    layout = (list [[header]] [[content]] [[footer]]);
}
```
### Тестирование

Все конструкции конфигурационного языка (включая вложенные массивы,
словари, вычисление констант и обработку ошибок) покрыты тестами. 
Для проверки программы используйте подготовленные файлы с тестовыми 
конфигурациями.

#### Пример теста:

```bash
python3 src/config_to_xml.py tests/sample_configs/physics_config.txt
```

#### Пример результата теста:

```xml
<config>
    <item>{'object': 'ball', 'force': 490.0, 'dimensions': [0.2, 0.2, 0.2]}</item>
</config>
```